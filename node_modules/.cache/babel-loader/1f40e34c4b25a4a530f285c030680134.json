{"ast":null,"code":"import _regeneratorRuntime from\"C:\\\\dangerzone-react\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";import _asyncToGenerator from\"C:\\\\dangerzone-react\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"C:\\\\dangerzone-react\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";import React,{useState}from\"react\";import{Form,Input,Button}from\"antd\";import{connect}from\"react-redux\";import{Redirect}from\"react-router-dom\";import{GoogleOutlined,FacebookFilled,LoadingOutlined}from\"@ant-design/icons\";import icon from\"../../assets/icon.jpeg\";import*as actions from\"../../store/actions/auth\";import\"./Login.css\";import server from\"../../api/server\";var NormalLoginForm=function NormalLoginForm(props){var _Form$useForm=Form.useForm(),_Form$useForm2=_slicedToArray(_Form$useForm,1),form=_Form$useForm2[0];var _useState=useState(false),_useState2=_slicedToArray(_useState,2),navigate=_useState2[0],setNavigate=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),errorMessage=_useState4[0],setErrorMessage=_useState4[1];if(navigate){return/*#__PURE__*/React.createElement(Redirect,{to:\"/homepage/\"});}var handleSubmit=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var values;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return form.validateFields();case 2:values=_context.sent;console.log(values);server.post(\"rest-auth/login/\",{username:values.username,password:values.password}).then(function(res){if(res.status===200){localStorage.setItem(\"token\",res.data.key);localStorage.setItem(\"username\",values.username);setNavigate(true);window.location.reload();}}).catch(function(error){console.log(error);setErrorMessage(\"Olala, try again. Your details are not matching...\");});case 5:case\"end\":return _context.stop();}}},_callee);}));return function handleSubmit(){return _ref.apply(this,arguments);};}();var handleGoogleLogin=function handleGoogleLogin(){server.get(\"accounts/google/login\").then(function(res){if(res.status===200){localStorage.setItem(\"token\",res.data.key);setNavigate(true);window.location.reload();}});};var handleFacebookLogin=function handleFacebookLogin(){server.get(\"accounts/facebook/login\").then(function(res){if(res.status===200){localStorage.setItem(\"token\",res.data.key);setNavigate(true);window.location.reload();}});};return/*#__PURE__*/React.createElement(\"div\",{className:\"base-container\",ref:props.containerRef,\"data-test\":\"base-container\"},/*#__PURE__*/React.createElement(\"div\",{className:\"content\",\"data-test\":\"content\"},/*#__PURE__*/React.createElement(\"img\",{src:icon,alt:\"icon\",className:\"image\"}),props.loading?/*#__PURE__*/React.createElement(LoadingOutlined,null):/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(Form,{form:form,onSubmit:handleSubmit,name:\"dynamic_rule\",className:\"login-form\",hideRequiredMark:true,\"data-test\":\"login-form\"},/*#__PURE__*/React.createElement(Form.Item,{className:\"form-group\",name:\"username\",label:\"Username\",rules:[{required:true,messsage:\"Please input your Username\"}]},/*#__PURE__*/React.createElement(Input,{placeholder:\"Username\",className:\"form-group-input\"})),/*#__PURE__*/React.createElement(Form.Item,{className:\"form-group\",name:\"password\",label:\"Password\",rules:[{required:true,messsage:\"Please input your Password!\"}]},/*#__PURE__*/React.createElement(Input,{type:\"password\",placeholder:\"Password\",className:\"form-group-input\"})),/*#__PURE__*/React.createElement(Form.Item,null,/*#__PURE__*/React.createElement(Button,{onClick:handleSubmit,className:\"buttonSubmit\",\"data-test\":\"buttonSubmit\"},\"Log in\"))),/*#__PURE__*/React.createElement(Button,{onClick:handleGoogleLogin,className:\"googleLogin\",\"data-test\":\"googleLogin\"},/*#__PURE__*/React.createElement(GoogleOutlined,null),\" Login with Google account\",\" \"),/*#__PURE__*/React.createElement(Button,{onClick:handleFacebookLogin,className:\"facebookLogin\",\"data-test\":\"facebookLogin\"},/*#__PURE__*/React.createElement(FacebookFilled,{className:\"facebookIcon\"}),\"Login with Facebook account\"),/*#__PURE__*/React.createElement(\"div\",{style:{color:\"red\"}},errorMessage))));};var mapStateToProps=function mapStateToProps(state){return{loading:state.loading,error:state.error};};var mapDispatchToProps=function mapDispatchToProps(dispatch){return{onAuth:function onAuth(username,password){return dispatch(actions.authLogin(username,password));}};};export default connect(mapStateToProps,mapDispatchToProps)(NormalLoginForm);","map":{"version":3,"sources":["C:/dangerzone-react/src/components/Login/Login.js"],"names":["React","useState","Form","Input","Button","connect","Redirect","GoogleOutlined","FacebookFilled","LoadingOutlined","icon","actions","server","NormalLoginForm","props","useForm","form","navigate","setNavigate","errorMessage","setErrorMessage","handleSubmit","validateFields","values","console","log","post","username","password","then","res","status","localStorage","setItem","data","key","window","location","reload","catch","error","handleGoogleLogin","get","handleFacebookLogin","containerRef","loading","required","messsage","color","mapStateToProps","state","mapDispatchToProps","dispatch","onAuth","authLogin"],"mappings":"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","sourcesContent":["import React, { useState } from \"react\";\r\nimport { Form, Input, Button } from \"antd\";\r\nimport { connect } from \"react-redux\";\r\nimport { Redirect } from \"react-router-dom\";\r\n\r\nimport {\r\n  GoogleOutlined,\r\n  FacebookFilled,\r\n  LoadingOutlined\r\n} from \"@ant-design/icons\";\r\nimport icon from \"../../assets/icon.jpeg\";\r\nimport * as actions from \"../../store/actions/auth\";\r\nimport \"./Login.css\";\r\n\r\nimport server from \"../../api/server\";\r\n\r\nconst NormalLoginForm = props => {\r\n  const [form] = Form.useForm();\r\n  const [navigate, setNavigate] = useState(false);\r\n  const [errorMessage, setErrorMessage] = useState(\"\");\r\n\r\n  if (navigate) {\r\n    return <Redirect to=\"/homepage/\" />;\r\n  }\r\n\r\n  const handleSubmit = async () => {\r\n    const values = await form.validateFields();\r\n    console.log(values);\r\n    server\r\n      .post(\"rest-auth/login/\", {\r\n        username: values.username,\r\n        password: values.password\r\n      })\r\n      .then(res => {\r\n        if (res.status === 200) {\r\n          localStorage.setItem(\"token\", res.data.key);\r\n          localStorage.setItem(\"username\", values.username);\r\n          setNavigate(true);\r\n          window.location.reload();\r\n        }\r\n      })\r\n      .catch(function(error) {\r\n        console.log(error);\r\n        setErrorMessage(\"Olala, try again. Your details are not matching...\");\r\n      });\r\n  };\r\n\r\n  const handleGoogleLogin = () => {\r\n    server.get(\"accounts/google/login\").then(res => {\r\n      if (res.status === 200) {\r\n        localStorage.setItem(\"token\", res.data.key);\r\n        setNavigate(true);\r\n        window.location.reload();\r\n      }\r\n    });\r\n  };\r\n\r\n  const handleFacebookLogin = () => {\r\n    server.get(\"accounts/facebook/login\").then(res => {\r\n      if (res.status === 200) {\r\n        localStorage.setItem(\"token\", res.data.key);\r\n        setNavigate(true);\r\n        window.location.reload();\r\n      }\r\n    });\r\n  };\r\n\r\n  return (\r\n    <div\r\n      className=\"base-container\"\r\n      ref={props.containerRef}\r\n      data-test=\"base-container\"\r\n    >\r\n      <div className=\"content\" data-test=\"content\">\r\n        <img src={icon} alt=\"icon\" className=\"image\" />\r\n        {props.loading ? (\r\n          <LoadingOutlined />\r\n        ) : (\r\n          <>\r\n            <Form\r\n              form={form}\r\n              onSubmit={handleSubmit}\r\n              name=\"dynamic_rule\"\r\n              className=\"login-form\"\r\n              hideRequiredMark={true}\r\n              data-test=\"login-form\"\r\n            >\r\n              <Form.Item\r\n                className=\"form-group\"\r\n                name=\"username\"\r\n                label=\"Username\"\r\n                rules={[\r\n                  {\r\n                    required: true,\r\n                    messsage: \"Please input your Username\"\r\n                  }\r\n                ]}\r\n              >\r\n                <Input placeholder=\"Username\" className=\"form-group-input\" />\r\n              </Form.Item>\r\n              <Form.Item\r\n                className=\"form-group\"\r\n                name=\"password\"\r\n                label=\"Password\"\r\n                rules={[\r\n                  {\r\n                    required: true,\r\n                    messsage: \"Please input your Password!\"\r\n                  }\r\n                ]}\r\n              >\r\n                <Input\r\n                  type=\"password\"\r\n                  placeholder=\"Password\"\r\n                  className=\"form-group-input\"\r\n                />\r\n              </Form.Item>\r\n              <Form.Item>\r\n                <Button\r\n                  onClick={handleSubmit}\r\n                  className=\"buttonSubmit\"\r\n                  data-test=\"buttonSubmit\"\r\n                >\r\n                  Log in\r\n                </Button>\r\n              </Form.Item>\r\n            </Form>\r\n            <Button\r\n              onClick={handleGoogleLogin}\r\n              className=\"googleLogin\"\r\n              data-test=\"googleLogin\"\r\n            >\r\n              <GoogleOutlined /> Login with Google account{\" \"}\r\n            </Button>\r\n            <Button\r\n              onClick={handleFacebookLogin}\r\n              className=\"facebookLogin\"\r\n              data-test=\"facebookLogin\"\r\n            >\r\n              <FacebookFilled className=\"facebookIcon\" />\r\n              Login with Facebook account\r\n            </Button>\r\n            <div style={{ color: \"red\" }}>{errorMessage}</div>\r\n          </>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nconst mapStateToProps = state => {\r\n  return {\r\n    loading: state.loading,\r\n    error: state.error\r\n  };\r\n};\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n  return {\r\n    onAuth: (username, password) =>\r\n      dispatch(actions.authLogin(username, password))\r\n  };\r\n};\r\n\r\nexport default connect(\r\n  mapStateToProps,\r\n  mapDispatchToProps\r\n)(NormalLoginForm);\r\n"]},"metadata":{},"sourceType":"module"}
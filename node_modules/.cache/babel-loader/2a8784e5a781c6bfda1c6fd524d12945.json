{"ast":null,"code":"import _regeneratorRuntime from\"C:\\\\dangerzone-react\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";import _asyncToGenerator from\"C:\\\\dangerzone-react\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"C:\\\\dangerzone-react\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";import React,{useState}from\"react\";import{Form,Input,Button}from\"antd\";import{connect}from\"react-redux\";import{Redirect}from\"react-router-dom\";import{LoadingOutlined}from\"@ant-design/icons\";import icon from\"../assets/icon.jpeg\";import*as actions from\"../store/actions/auth\";import\"./Login.css\";import server from\"../api/server\";var SignupForm=function SignupForm(props){var _Form$useForm=Form.useForm(),_Form$useForm2=_slicedToArray(_Form$useForm,1),form=_Form$useForm2[0];var _useState=useState(false),_useState2=_slicedToArray(_useState,2),navigate=_useState2[0],setNavigate=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),errorMessage=_useState4[0],setErrorMessage=_useState4[1];if(navigate){return/*#__PURE__*/React.createElement(Redirect,{to:\"/homepage/\"});}var handleSubmit=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var values;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return form.validateFields();case 2:values=_context.sent;server.post(\"rest-auth/registration\",{username:values.username,email:values.email,password1:values.password1,password2:values.password2}).then(function(res){if(res.status===201){localStorage.setItem(\"token\",res.data.key);setNavigate(true);window.location.reload();}}).catch(function(error){console.log(error);setErrorMessage(\"Olala, something went wrong.\");});case 4:case\"end\":return _context.stop();}}},_callee);}));return function handleSubmit(){return _ref.apply(this,arguments);};}();return/*#__PURE__*/React.createElement(\"div\",{className:\"base-container\",ref:props.containerRef},/*#__PURE__*/React.createElement(\"div\",{className:\"content\"},/*#__PURE__*/React.createElement(\"img\",{src:icon,alt:\"icon\",className:\"image\"}),props.loading?/*#__PURE__*/React.createElement(LoadingOutlined,null):/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(Form,{form:form,onSubmit:handleSubmit,name:\"dynamic_rule\",className:\"login-form\",hideRequiredMark:true},/*#__PURE__*/React.createElement(Form.Item,{className:\"form-group\",name:\"username\",label:\"Username\",rules:[{required:true,messsage:\"Please input your Username\"}]},/*#__PURE__*/React.createElement(Input,{placeholder:\"Username\",className:\"form-group-input\"})),/*#__PURE__*/React.createElement(Form.Item,{className:\"form-group\",name:\"email\",label:\"Email\",rules:[{required:true,messsage:\"Please input your email\"}]},/*#__PURE__*/React.createElement(Input,{placeholder:\"Username\",className:\"form-group-input\"})),/*#__PURE__*/React.createElement(Form.Item,{className:\"form-group\",name:\"password1\",label:\"Password\",rules:[{required:true,messsage:\"Please input your Password!\"}]},/*#__PURE__*/React.createElement(Input,{type:\"password\",placeholder:\"Password\",className:\"form-group-input\"})),/*#__PURE__*/React.createElement(Form.Item,{className:\"form-group\",name:\"password2\",label:\"Confirm password\",rules:[{required:true,messsage:\"Please confirm your Password!\"}]},/*#__PURE__*/React.createElement(Input,{type:\"password\",placeholder:\"Password\",className:\"form-group-input\"})),/*#__PURE__*/React.createElement(Form.Item,null,/*#__PURE__*/React.createElement(Button,{onClick:handleSubmit,className:\"buttonSubmit\"},\"Sign up\"))),/*#__PURE__*/React.createElement(\"div\",{style:{color:\"red\"}},errorMessage))));};var mapStateToProps=function mapStateToProps(state){return{loading:state.loading,error:state.error};};var mapDispatchToProps=function mapDispatchToProps(dispatch){return{onAuth:function onAuth(username,email,password1,password2){return dispatch(actions.authSignup(username,email,password1,password2));}};};export default connect(mapStateToProps,mapDispatchToProps)(SignupForm);","map":{"version":3,"sources":["C:/dangerzone-react/src/components/signup.js"],"names":["React","useState","Form","Input","Button","connect","Redirect","LoadingOutlined","icon","actions","server","SignupForm","props","useForm","form","navigate","setNavigate","errorMessage","setErrorMessage","handleSubmit","validateFields","values","post","username","email","password1","password2","then","res","status","localStorage","setItem","data","key","window","location","reload","catch","error","console","log","containerRef","loading","required","messsage","color","mapStateToProps","state","mapDispatchToProps","dispatch","onAuth","authSignup"],"mappings":"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","sourcesContent":["import React, { useState } from \"react\";\r\nimport { Form, Input, Button } from \"antd\";\r\nimport { connect } from \"react-redux\";\r\nimport { Redirect } from \"react-router-dom\";\r\n\r\nimport { LoadingOutlined } from \"@ant-design/icons\";\r\nimport icon from \"../assets/icon.jpeg\";\r\nimport * as actions from \"../store/actions/auth\";\r\nimport \"./Login.css\";\r\n\r\nimport server from \"../api/server\";\r\n\r\nconst SignupForm = props => {\r\n  const [form] = Form.useForm();\r\n  const [navigate, setNavigate] = useState(false);\r\n  const [errorMessage, setErrorMessage] = useState(\"\");\r\n\r\n  if (navigate) {\r\n    return <Redirect to=\"/homepage/\" />;\r\n  }\r\n\r\n  const handleSubmit = async () => {\r\n    const values = await form.validateFields();\r\n    server\r\n      .post(\"rest-auth/registration\", {\r\n        username: values.username,\r\n        email: values.email,\r\n        password1: values.password1,\r\n        password2: values.password2\r\n      })\r\n      .then(res => {\r\n        if (res.status === 201) {\r\n          localStorage.setItem(\"token\", res.data.key);\r\n          setNavigate(true);\r\n          window.location.reload();\r\n        }\r\n      })\r\n      .catch(function(error) {\r\n        console.log(error);\r\n        setErrorMessage(\"Olala, something went wrong.\");\r\n      });\r\n  };\r\n\r\n  return (\r\n    <div className=\"base-container\" ref={props.containerRef}>\r\n      <div className=\"content\">\r\n        <img src={icon} alt=\"icon\" className=\"image\" />\r\n        {props.loading ? (\r\n          <LoadingOutlined />\r\n        ) : (\r\n          <>\r\n            <Form\r\n              form={form}\r\n              onSubmit={handleSubmit}\r\n              name=\"dynamic_rule\"\r\n              className=\"login-form\"\r\n              hideRequiredMark={true}\r\n            >\r\n              <Form.Item\r\n                className=\"form-group\"\r\n                name=\"username\"\r\n                label=\"Username\"\r\n                rules={[\r\n                  {\r\n                    required: true,\r\n                    messsage: \"Please input your Username\"\r\n                  }\r\n                ]}\r\n              >\r\n                <Input placeholder=\"Username\" className=\"form-group-input\" />\r\n              </Form.Item>\r\n              <Form.Item\r\n                className=\"form-group\"\r\n                name=\"email\"\r\n                label=\"Email\"\r\n                rules={[\r\n                  {\r\n                    required: true,\r\n                    messsage: \"Please input your email\"\r\n                  }\r\n                ]}\r\n              >\r\n                <Input placeholder=\"Username\" className=\"form-group-input\" />\r\n              </Form.Item>\r\n              <Form.Item\r\n                className=\"form-group\"\r\n                name=\"password1\"\r\n                label=\"Password\"\r\n                rules={[\r\n                  {\r\n                    required: true,\r\n                    messsage: \"Please input your Password!\"\r\n                  }\r\n                ]}\r\n              >\r\n                <Input\r\n                  type=\"password\"\r\n                  placeholder=\"Password\"\r\n                  className=\"form-group-input\"\r\n                />\r\n              </Form.Item>\r\n              <Form.Item\r\n                className=\"form-group\"\r\n                name=\"password2\"\r\n                label=\"Confirm password\"\r\n                rules={[\r\n                  {\r\n                    required: true,\r\n                    messsage: \"Please confirm your Password!\"\r\n                  }\r\n                ]}\r\n              >\r\n                <Input\r\n                  type=\"password\"\r\n                  placeholder=\"Password\"\r\n                  className=\"form-group-input\"\r\n                />\r\n              </Form.Item>\r\n              <Form.Item>\r\n                <Button onClick={handleSubmit} className=\"buttonSubmit\">\r\n                  Sign up\r\n                </Button>\r\n              </Form.Item>\r\n            </Form>\r\n            <div style={{ color: \"red\" }}>{errorMessage}</div>\r\n          </>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nconst mapStateToProps = state => {\r\n  return {\r\n    loading: state.loading,\r\n    error: state.error\r\n  };\r\n};\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n  return {\r\n    onAuth: (username, email, password1, password2) =>\r\n      dispatch(actions.authSignup(username, email, password1, password2))\r\n  };\r\n};\r\n\r\nexport default connect(\r\n  mapStateToProps,\r\n  mapDispatchToProps\r\n)(SignupForm);\r\n"]},"metadata":{},"sourceType":"module"}
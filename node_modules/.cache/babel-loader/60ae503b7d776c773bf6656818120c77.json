{"ast":null,"code":"import _regeneratorRuntime from\"C:\\\\dangerzone-react\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";import _asyncToGenerator from\"C:\\\\dangerzone-react\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"C:\\\\dangerzone-react\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from\"react\";import{Progress}from\"antd\";import{Link}from\"react-router-dom\";import{UserOutlined,LogoutOutlined}from\"@ant-design/icons\";import{connect}from\"react-redux\";import\"font-awesome/css/font-awesome.min.css\";import*as actions from\"../../store/actions/auth\";import{getUserData as _getUserData}from\"../../store/actions/userData\";import server from\"../../api/server\";import\"./UserBoard.css\";var token=localStorage.getItem(\"token\");var UserBoard=function UserBoard(props){var _useState=useState(0),_useState2=_slicedToArray(_useState,2),percentage=_useState2[0],setPercentage=_useState2[1];var calculatePercentage=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var chapters,finishedChapters,total,current,percent;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return server.get(\"/chapters/\",{headers:{authorization:\"Token \".concat(token)}});case 2:chapters=_context.sent;finishedChapters=[];props.userData.chapterdata.map(function(item){return item.completed===true?finishedChapters.push(item):null;});total=chapters.data.length;current=finishedChapters.length;percent=(current/(total/100)).toFixed(0);setPercentage(percent);case 9:case\"end\":return _context.stop();}}},_callee);}));return function calculatePercentage(){return _ref.apply(this,arguments);};}();calculatePercentage();useEffect(props.getUserData,[]);return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(\"div\",{className:\"userboard\",\"data-test\":\"userboard\"},/*#__PURE__*/React.createElement(Progress,{strokeColor:{\"100%\":\"#364d79\"},type:\"circle\",percent:percentage,className:\"progressBar\",\"data-test\":\"progressBar\"}),/*#__PURE__*/React.createElement(\"div\",{className:\"iconsContainer\",\"data-test\":\"iconsContainer\"},/*#__PURE__*/React.createElement(Link,{to:\"/profile/\"},/*#__PURE__*/React.createElement(UserOutlined,{className:\"iconBoard\"})),/*#__PURE__*/React.createElement(Link,{to:\"/\",onClick:actions.logout},/*#__PURE__*/React.createElement(LogoutOutlined,{className:\"iconBoard\"}))),/*#__PURE__*/React.createElement(\"div\",{className:\"welcomeText\",\"data-test\":\"welcomeText\"},\"Hello \",props.userData.username)));};var mapStateToProps=function mapStateToProps(state){return{userData:state.userDataReducer};};var mapDispatchToProps=function mapDispatchToProps(dispatch){return{getUserData:function getUserData(){dispatch(_getUserData());}};};export default connect(mapStateToProps,mapDispatchToProps)(UserBoard);","map":{"version":3,"sources":["C:/dangerzone-react/src/components/UserBoard/UserBoard.js"],"names":["React","useState","useEffect","Progress","Link","UserOutlined","LogoutOutlined","connect","actions","getUserData","server","token","localStorage","getItem","UserBoard","props","percentage","setPercentage","calculatePercentage","get","headers","authorization","chapters","finishedChapters","userData","chapterdata","map","item","completed","push","total","data","length","current","percent","toFixed","logout","username","mapStateToProps","state","userDataReducer","mapDispatchToProps","dispatch"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport { Progress } from \"antd\";\r\nimport { Link } from \"react-router-dom\";\r\nimport { UserOutlined, LogoutOutlined } from \"@ant-design/icons\";\r\nimport { connect } from \"react-redux\";\r\nimport \"font-awesome/css/font-awesome.min.css\";\r\n\r\nimport * as actions from \"../../store/actions/auth\";\r\nimport { getUserData } from \"../../store/actions/userData\";\r\n\r\nimport server from \"../../api/server\";\r\nimport \"./UserBoard.css\";\r\n\r\nconst token = localStorage.getItem(\"token\");\r\n\r\nconst UserBoard = props => {\r\n  const [percentage, setPercentage] = useState(0);\r\n\r\n  const calculatePercentage = async () => {\r\n    const chapters = await server.get(\"/chapters/\", {\r\n      headers: { authorization: `Token ${token}` }\r\n    });\r\n    const finishedChapters = [];\r\n    props.userData.chapterdata.map(item => {\r\n      return item.completed === true ? finishedChapters.push(item) : null;\r\n    });\r\n    const total = chapters.data.length;\r\n    const current = finishedChapters.length;\r\n    const percent = (current / (total / 100)).toFixed(0);\r\n    setPercentage(percent);\r\n  };\r\n  calculatePercentage();\r\n\r\n  useEffect(props.getUserData, []);\r\n\r\n  return (\r\n    <>\r\n      <div className=\"userboard\" data-test=\"userboard\">\r\n        <Progress\r\n          strokeColor={{\r\n            \"100%\": \"#364d79\"\r\n          }}\r\n          type=\"circle\"\r\n          percent={percentage}\r\n          className=\"progressBar\"\r\n          data-test=\"progressBar\"\r\n        />\r\n        <div className=\"iconsContainer\" data-test=\"iconsContainer\">\r\n          <Link to=\"/profile/\">\r\n            <UserOutlined className=\"iconBoard\" />\r\n          </Link>\r\n          <Link to=\"/\" onClick={actions.logout}>\r\n            <LogoutOutlined className=\"iconBoard\" />\r\n          </Link>\r\n        </div>\r\n        <div className=\"welcomeText\" data-test=\"welcomeText\">\r\n          Hello {props.userData.username}\r\n        </div>\r\n      </div>\r\n    </>\r\n  );\r\n};\r\n\r\nconst mapStateToProps = state => {\r\n  return {\r\n    userData: state.userDataReducer\r\n  };\r\n};\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n  return {\r\n    getUserData: () => {\r\n      dispatch(getUserData());\r\n    }\r\n  };\r\n};\r\n\r\nexport default connect(\r\n  mapStateToProps,\r\n  mapDispatchToProps\r\n)(UserBoard);\r\n"]},"metadata":{},"sourceType":"module"}